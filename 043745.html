

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Report</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            /*height: 100%;*/
        }

        .nav-tabs {
            width: 100%;
            /* background-color: #f1f1f1; */
        }

        .nav-tabs .nav-item {
            flex: 1;
            text-align: center;
        }

        .nav-tabs .nav-item .nav-link {
            width: 100%;
            color: #000;
            border: 1px solid rgba(38, 160, 248, 0.1);
            border-bottom: none;
            box-shadow: 2px 2px 5px rgba(38, 160, 248, 0.1);
        }

        .nav-tabs .nav-item .nav-link.active {
            background-color: #FFCC00;
            box-shadow: inset 2px 2px 5px rgba(38, 160, 248, 0.1);
        }

        .tab-content {
            height: calc(100% - 50px); /* Adjust based on the height of your tabs */
            overflow: auto;
            padding: 20px;
          
        }

        .tab-pane {
            height: 100%;
        }
        div#summary-container {
            /* padding: 20px; */
            padding: 2em 0 2em 0;
            height: 80vh;
            border: 0.5px solid rgb(178, 178, 176);
            overflow: auto;
        }

        /* Set the height of the table container to make it big */
        .table-container {
            /*height: 400px; !* Adjust as needed *!*/
            height: 70vh;
            /* Adjust as needed */
            overflow: auto;
        }

        .urgent-table-container {
            overflow: auto;
        }

        /* Set the width of the table to make it big */
        .table-responsive {
            width: 1000px;
            /* Adjust as needed */
            overflow-x: auto;
            overflow-y: auto;
        }

        /* Fix the header of the table */
        .fixed-header thead {
            position: sticky;
            top: 0;
            z-index: 1;
            background-color: #343a40;
            /* Dark background color for the header */
        }

        .custom-th {
            width: 150px;
            /* Adjust the width as needed */
        }

        .custom-modal {
            height: 80vh;
            /* 50% of the viewport height */
        }

        .overflow-auto {
            overflow-x: auto;
            /* Horizontal scroll if needed */
            overflow-y: auto;
            /* Vertical scroll if needed */
        }

        .dropdown-custom {
            max-height: 200px;
            overflow-y: auto;
        }
        .dropend{
            margin-bottom: 3em;
        }

        .day-dropdown {
            max-height: 200px;
            overflow-y: auto;
        }

        .card-body {
            max-height: 50vh;
            overflow-y: auto;
        }

        .clickable-card {
            cursor: pointer;
        }
        .table-info{
            background-color: #ffcc80;
        }
        .table-wrapper {
            width: 100%;
            overflow-x: auto;
        }

        .table {
            table-layout: fixed;
            width: 100%;
            border-collapse: collapse;
        }

        .table th, .table td {
            word-wrap: break-word;
            overflow-wrap: break-word;
            white-space: normal;
            padding: 8px;
            text-align: left;
        }

        .custom-th {
            /* background-color: #f8f9fa; */
            font-weight: bold;
        }
        .header_content{
            margin-left: 2em;
        }
        
    </style>
</head>
<body>
    <div class="header_content">

        <div class="row">
            <div class="col">
                <div class="d-flex">
                    <div class="p-1 flex-grow-1"></div>
                    <div class="p-2">
                        Days Left :
                    </div>
                    <div class="p-2">
                        <div class="dropdown-center ">
                            <button aria-expanded="false" class="btn btn-outline-warning dropdown-toggle btn-sm"
                                data-toggle="dropdown" id="daysDropdown" type="button">Select Days</button>
                            <ul aria-labelledby="daysDropdown" class="dropdown-menu mt-4 day-dropdown">
                                <li><a class="dropdown-item" data-days="7" href="#">7 Days</a></li>
                                <li><a class="dropdown-item" data-days="8" href="#">8 Days</a></li>
                                <li><a class="dropdown-item" data-days="9" href="#">9 Days</a></li>
                                <li><a class="dropdown-item" data-days="10" href="#">10 Days</a></li>
                                <li><a class="dropdown-item" data-days="11" href="#">11 Days</a></li>
                                <li><a class="dropdown-item" data-days="12" href="#">12 Days</a></li>
                                <li><a class="dropdown-item" data-days="13" href="#">13 Days</a></li>
                                <li><a class="dropdown-item" data-days="14" href="#">14 Days</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
    <ul class="nav nav-tabs" id="myTab" role="tablist">
        <li class="nav-item">
            <a class="nav-link active" id="action-tab" data-toggle="tab" href="#action" role="tab" aria-controls="home" aria-selected="true">Immediate Action Required :</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" id="summary-tab" data-toggle="tab" href="#summary" role="tab" aria-controls="profile" aria-selected="false" onclick="createCard()">Summary</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" id="raw-tab" data-toggle="tab" href="#raw" role="tab" aria-controls="contact" aria-selected="false" onclick="renderTable(sortedData)">Additional Data</a>
        </li>
    </ul>
    <div class="tab-content" id="myTabContent">
        <!-- Action Tab -->
        <div class="tab-pane fade show active" id="action" role="tabpanel" aria-labelledby="action-tab" id="action-tab-content">
            <!-- <h4>Tab 1 Content</h4> -->
            
            <div class="row">
                <div>
                    <div class="urgent-modal-body urgent-table-container">
                        <!-- <p>This is the content of the urgent item. Please select days to view items that are going to
                            impact the resource.</p> -->
                    </div>
                </div>
            </div>
            <!-- <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#actionModal">Open Modal 1</button> -->
        </div>

        <!-- Summary Tab -->
        <div class="tab-pane fade" id="summary" role="tabpanel" aria-labelledby="summary-tab" id="summary-tab-content">
            <!-- <h4>Tab 2 Content</h4> -->
            <div class="summary-container" id="summary-container">
                <!-- Data will be populated here by JavaScript -->
            </div>
            <!-- <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#summaryModal">Open Modal 2</button> -->
        </div>

        <!-- Raw Data Tab -->
        <div class="tab-pane fade" id="raw" role="tabpanel" aria-labelledby="raw-tab" id="raw-tab-content">
            <!-- <h4>Tab 3 Content</h4> -->
            <!-- <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#rawDataModal">Open Modal 3</button> -->

            <!-- Search Bar -->
                <div class="rawData" id="rawData">
                    <div class="row mb-4">
                        <div class="col-10">
                            <input class="form-control" id="searchInput" placeholder="Search..." type="text">
                        </div>
                        <div class="col-2">
                            <button class="btn btn-outline-warning" onclick="reset()" style="width: 100%;"
                                type="button">Reset</button>
                        </div>
                    </div>
                    <div class="table-container" id="table-container">
                        <!-- Data will be populated here by JavaScript -->
                    </div>
                    &nbsp;&nbsp;&nbsp;
                </div>
        </div>
    </div>

    <!-- Modal 1 -->
    <div class="modal fade" id="actionModal" tabindex="-1" role="dialog" aria-labelledby="tab1ModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="tab1ModalLabel">Modal 1 Title</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    Content for Modal 1.
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary">Save changes</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal 2 -->
    <div class="modal fade" id="summaryModal" tabindex="-1" role="dialog" aria-labelledby="tab2ModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="tab2ModalLabel">Modal 2 Title</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    Content for Modal 2.
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary">Save changes</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal 3 -->
    <div class="modal fade" id="rawDataModal" tabindex="-1" role="dialog" aria-labelledby="tab3ModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="tab3ModalLabel">Modal 3 Title</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    Content for Modal 3.
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary">Save changes</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Column Click -->
    <div aria-hidden="true" aria-labelledby="exampleModalLabel"
        class="modal fade custom-modal" id="exampleModal" tabindex="-1">
        <div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Column Name:</h5>
                    <button aria-label="Close" class="btn-close" data-dismiss="modal" type="button">X</button>
                </div>
                <div class="modal-body overflow-auto" id="nestedTableContainer" style="word-wrap: break-word;">
                    <!-- Your long content goes here -->
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" data-dismiss="modal" type="button">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script> -->

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.1/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

</body>
</html>

<script>
    let currentSortColumn = null;
    let isAscending = true;
    var countsObj = {}
    var targetArray = null
    var selectedDays = null

    const jsonData = [{"AccountName": "NVSGISRSB.GB", "AffectedResources": "arn:aws:rds:eu-west-1:866919043554:cluster:snowrdsdev1698", "ClarityID": "043745", "arn": "arn:aws:health:eu-west-1::event/RDS/AWS_RDS_PLANNED_LIFECYCLE_EVENT/AWS_RDS_PLANNED_LIFECYCLE_EVENT_c14ede9359e6ccd15f44e687cb43446b77b111fc06dfc3ef7bf587797cf9178e", "awsAccountId": "866919043554", "description": {"latestDescription": "[AWS Health may periodically trigger reminder notifications about this communication if resources remain unresolved.]\n\nYou are receiving this message because you have one or more Amazon Aurora MySQL clusters running a version of Aurora MySQL 2 (with MySQL 5.7 compatibility) on a provisioned instance in the EU-WEST-1 Region. If you are running Amazon Aurora MySQL 2 (with MySQL 5.7 compatibility) in an Aurora Serverless v1 cluster, this communication does not apply to you.\n\nAmazon Aurora MySQL 2 (with MySQL 5.7 compatibility) will reach end of standard support on October 31, 2024. We are providing you with a 6-month reminder, following up from our previous 12-month notice, so you have sufficient time to upgrade your database cluster(s). Please note that upgrading between major versions requires more extensive planning and testing than for a minor version and the process can take substantial time.\n\nWe recommend that you upgrade your databases to the latest patch of the default minor version of Amazon Aurora MySQL 3 (currently Aurora MySQL 3.04) or higher, at your earliest convenience before October 31, 2024. For how to do the upgrades please consult our documentation [1]. Upgrades may be performed using in-place upgrade [2], snapshot and restore [3], or a high availability blue-green upgrade technique which can be fully managed using Amazon RDS Blue/Green Deployments [4]. The amount of downtime your system will experience depends on the upgrade technique chosen, as well as properties of your schema.\n\nMajor version upgrades will require downtime and might require manual intervention and application changes. We will send you updates and reminders before the standard support deadline. You can find the latest information needed to plan your upgrade in our 'User Guide for Aurora' [5].\n\nThe affected clusters are listed in the 'Affected resources' tab. You can also find clusters which are affected by this deprecation notice by referring to the following user guide [6].\n\nAmazon Aurora MySQL provides you with one year of free extended support over community MySQL 5.7, that reached end of life on October 31, 2023. If you need more time to complete the upgrades, you can use Amazon RDS Extended Support [7] for Aurora MySQL 2. RDS Extended Support [8] for Aurora is a paid service [9] that will provide up to 28 additional months of support for Aurora MySQL 2 until the end of extended support in February 2027. After October 31, 2024 all your databases continue running Aurora MySQL 2 will be automatically enrolled in RDS Extended Support. Charges for RDS Extended Support will start accruing from December 1, 2024. RDS Extended Support will only be offered for Aurora MySQL minor versions 2.11 and 2.12. If you plan to use Amazon Aurora MySQL 2 beyond end of standard support, please plan to be running your database(s) on one of these minor versions before October 31, 2024. If your databases are not running Aurora MySQL minor versions 2.11 or 2.12 by October 31, 2024 they will be upgraded before being enrolled into RDS Extended Support. This upgrade will occur during your maintenance window and can not be turned off. \n\nShould you have any questions or concerns, the AWS Support Team is available on AWS re:Post [10] and via AWS Support. [11]\n\n[1] https://docs.aws.amazon.com/AmazonRDS/latest/AuroraUserGuide/AuroraMySQL.Updates.MajorVersionUpgrade.html#AuroraMySQL.Updates.MajorVersionUpgrade.2to3 \n[2] https://docs.aws.amazon.com/AmazonRDS/latest/AuroraUserGuide/AuroraMySQL.Updates.MajorVersionUpgrade.html#AuroraMySQL.Upgrading.Procedure \n[3] https://docs.aws.amazon.com/AmazonRDS/latest/AuroraUserGuide/aurora-restore-snapshot.html \n[4] https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/blue-green-deployments.html \n[5] https://docs.aws.amazon.com/AmazonRDS/latest/AuroraUserGuide/Aurora.MySQL57.EOL.html \n[6] https://docs.aws.amazon.com/AmazonRDS/latest/AuroraUserGuide/Aurora.MySQL57.EOL.html#find-cluster \n[7] https://docs.aws.amazon.com/AmazonRDS/latest/AuroraUserGuide/extended-support.html \n[8] https://aws.amazon.com/blogs/database/introducing-amazon-rds-extended-support-for-mysql-databases-on-amazon-aurora-and-amazon-rds/ \n[9] https://aws.amazon.com/rds/aurora/pricing/#Amazon_RDS_Extended_Support_costs \n[10] https://repost.aws/ \n[11] https://aws.amazon.com/support"}, "endTime": null, "eventTypeCategory": "scheduledChange", "eventTypeCode": "AWS_RDS_PLANNED_LIFECYCLE_EVENT", "lastUpdatedTime": "2024-07-17 06:53:55.181000+02:00", "region": "eu-west-1", "service": "RDS", "startTime": "1730358000", "statusCode": "upcoming"}, {"AccountName": "NVSGISRSB.GB", "AffectedResources": "arn:aws:rds:eu-west-1:866919043554:cluster:snowrdsdev3768", "ClarityID": "043745", "arn": "arn:aws:health:eu-west-1::event/RDS/AWS_RDS_PLANNED_LIFECYCLE_EVENT/AWS_RDS_PLANNED_LIFECYCLE_EVENT_c14ede9359e6ccd15f44e687cb43446b77b111fc06dfc3ef7bf587797cf9178e", "awsAccountId": "866919043554", "description": {"latestDescription": "[AWS Health may periodically trigger reminder notifications about this communication if resources remain unresolved.]\n\nYou are receiving this message because you have one or more Amazon Aurora MySQL clusters running a version of Aurora MySQL 2 (with MySQL 5.7 compatibility) on a provisioned instance in the EU-WEST-1 Region. If you are running Amazon Aurora MySQL 2 (with MySQL 5.7 compatibility) in an Aurora Serverless v1 cluster, this communication does not apply to you.\n\nAmazon Aurora MySQL 2 (with MySQL 5.7 compatibility) will reach end of standard support on October 31, 2024. We are providing you with a 6-month reminder, following up from our previous 12-month notice, so you have sufficient time to upgrade your database cluster(s). Please note that upgrading between major versions requires more extensive planning and testing than for a minor version and the process can take substantial time.\n\nWe recommend that you upgrade your databases to the latest patch of the default minor version of Amazon Aurora MySQL 3 (currently Aurora MySQL 3.04) or higher, at your earliest convenience before October 31, 2024. For how to do the upgrades please consult our documentation [1]. Upgrades may be performed using in-place upgrade [2], snapshot and restore [3], or a high availability blue-green upgrade technique which can be fully managed using Amazon RDS Blue/Green Deployments [4]. The amount of downtime your system will experience depends on the upgrade technique chosen, as well as properties of your schema.\n\nMajor version upgrades will require downtime and might require manual intervention and application changes. We will send you updates and reminders before the standard support deadline. You can find the latest information needed to plan your upgrade in our 'User Guide for Aurora' [5].\n\nThe affected clusters are listed in the 'Affected resources' tab. You can also find clusters which are affected by this deprecation notice by referring to the following user guide [6].\n\nAmazon Aurora MySQL provides you with one year of free extended support over community MySQL 5.7, that reached end of life on October 31, 2023. If you need more time to complete the upgrades, you can use Amazon RDS Extended Support [7] for Aurora MySQL 2. RDS Extended Support [8] for Aurora is a paid service [9] that will provide up to 28 additional months of support for Aurora MySQL 2 until the end of extended support in February 2027. After October 31, 2024 all your databases continue running Aurora MySQL 2 will be automatically enrolled in RDS Extended Support. Charges for RDS Extended Support will start accruing from December 1, 2024. RDS Extended Support will only be offered for Aurora MySQL minor versions 2.11 and 2.12. If you plan to use Amazon Aurora MySQL 2 beyond end of standard support, please plan to be running your database(s) on one of these minor versions before October 31, 2024. If your databases are not running Aurora MySQL minor versions 2.11 or 2.12 by October 31, 2024 they will be upgraded before being enrolled into RDS Extended Support. This upgrade will occur during your maintenance window and can not be turned off. \n\nShould you have any questions or concerns, the AWS Support Team is available on AWS re:Post [10] and via AWS Support. [11]\n\n[1] https://docs.aws.amazon.com/AmazonRDS/latest/AuroraUserGuide/AuroraMySQL.Updates.MajorVersionUpgrade.html#AuroraMySQL.Updates.MajorVersionUpgrade.2to3 \n[2] https://docs.aws.amazon.com/AmazonRDS/latest/AuroraUserGuide/AuroraMySQL.Updates.MajorVersionUpgrade.html#AuroraMySQL.Upgrading.Procedure \n[3] https://docs.aws.amazon.com/AmazonRDS/latest/AuroraUserGuide/aurora-restore-snapshot.html \n[4] https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/blue-green-deployments.html \n[5] https://docs.aws.amazon.com/AmazonRDS/latest/AuroraUserGuide/Aurora.MySQL57.EOL.html \n[6] https://docs.aws.amazon.com/AmazonRDS/latest/AuroraUserGuide/Aurora.MySQL57.EOL.html#find-cluster \n[7] https://docs.aws.amazon.com/AmazonRDS/latest/AuroraUserGuide/extended-support.html \n[8] https://aws.amazon.com/blogs/database/introducing-amazon-rds-extended-support-for-mysql-databases-on-amazon-aurora-and-amazon-rds/ \n[9] https://aws.amazon.com/rds/aurora/pricing/#Amazon_RDS_Extended_Support_costs \n[10] https://repost.aws/ \n[11] https://aws.amazon.com/support"}, "endTime": null, "eventTypeCategory": "scheduledChange", "eventTypeCode": "AWS_RDS_PLANNED_LIFECYCLE_EVENT", "lastUpdatedTime": "2024-07-17 06:53:55.181000+02:00", "region": "eu-west-1", "service": "RDS", "startTime": "1730358000", "statusCode": "upcoming"}, {"AccountName": "NVSGISRSID.GB", "AffectedResources": "arn:aws:rds:us-east-1:720243969453:cluster:awsbakcuprestoreauroradb", "ClarityID": "043745", "arn": "arn:aws:health:us-east-1::event/RDS/AWS_RDS_PLANNED_LIFECYCLE_EVENT/AWS_RDS_PLANNED_LIFECYCLE_EVENT_57cd2489096ca26892be454df9b0aa886843cf3c1aa60e8c1654b5db9e6220f4", "awsAccountId": "720243969453", "description": {"latestDescription": "[AWS Health may periodically trigger reminder notifications about this communication if resources remain unresolved.]\n\nYou are receiving this message because you have one or more Amazon Aurora MySQL clusters running a version of Aurora MySQL 2 (with MySQL 5.7 compatibility) on a provisioned instance in the US-EAST-1 Region. If you are running Amazon Aurora MySQL 2 (with MySQL 5.7 compatibility) in an Aurora Serverless v1 cluster, this communication does not apply to you.\n\nAmazon Aurora MySQL 2 (with MySQL 5.7 compatibility) will reach end of standard support on October 31, 2024. We are providing you with a 6-month reminder, following up from our previous 12-month notice, so you have sufficient time to upgrade your database cluster(s). Please note that upgrading between major versions requires more extensive planning and testing than for a minor version and the process can take substantial time.\n\nWe recommend that you upgrade your databases to the latest patch of the default minor version of Amazon Aurora MySQL 3 (currently Aurora MySQL 3.04) or higher, at your earliest convenience before October 31, 2024. For how to do the upgrades please consult our documentation [1]. Upgrades may be performed using in-place upgrade [2], snapshot and restore [3], or a high availability blue-green upgrade technique which can be fully managed using Amazon RDS Blue/Green Deployments [4]. The amount of downtime your system will experience depends on the upgrade technique chosen, as well as properties of your schema.\n\nMajor version upgrades will require downtime and might require manual intervention and application changes. We will send you updates and reminders before the standard support deadline. You can find the latest information needed to plan your upgrade in our 'User Guide for Aurora' [5].\n\nThe affected clusters are listed in the 'Affected resources' tab. You can also find clusters which are affected by this deprecation notice by referring to the following user guide [6].\n\nAmazon Aurora MySQL provides you with one year of free extended support over community MySQL 5.7, that reached end of life on October 31, 2023. If you need more time to complete the upgrades, you can use Amazon RDS Extended Support [7] for Aurora MySQL 2. RDS Extended Support [8] for Aurora is a paid service [9] that will provide up to 28 additional months of support for Aurora MySQL 2 until the end of extended support in February 2027. After October 31, 2024 all your databases continue running Aurora MySQL 2 will be automatically enrolled in RDS Extended Support. Charges for RDS Extended Support will start accruing from December 1, 2024. RDS Extended Support will only be offered for Aurora MySQL minor versions 2.11 and 2.12. If you plan to use Amazon Aurora MySQL 2 beyond end of standard support, please plan to be running your database(s) on one of these minor versions before October 31, 2024. If your databases are not running Aurora MySQL minor versions 2.11 or 2.12 by October 31, 2024 they will be upgraded before being enrolled into RDS Extended Support. This upgrade will occur during your maintenance window and can not be turned off. \n\nShould you have any questions or concerns, the AWS Support Team is available on AWS re:Post [10] and via AWS Support. [11]\n\n[1] https://docs.aws.amazon.com/AmazonRDS/latest/AuroraUserGuide/AuroraMySQL.Updates.MajorVersionUpgrade.html#AuroraMySQL.Updates.MajorVersionUpgrade.2to3 \n[2] https://docs.aws.amazon.com/AmazonRDS/latest/AuroraUserGuide/AuroraMySQL.Updates.MajorVersionUpgrade.html#AuroraMySQL.Upgrading.Procedure \n[3] https://docs.aws.amazon.com/AmazonRDS/latest/AuroraUserGuide/aurora-restore-snapshot.html \n[4] https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/blue-green-deployments.html \n[5] https://docs.aws.amazon.com/AmazonRDS/latest/AuroraUserGuide/Aurora.MySQL57.EOL.html \n[6] https://docs.aws.amazon.com/AmazonRDS/latest/AuroraUserGuide/Aurora.MySQL57.EOL.html#find-cluster \n[7] https://docs.aws.amazon.com/AmazonRDS/latest/AuroraUserGuide/extended-support.html \n[8] https://aws.amazon.com/blogs/database/introducing-amazon-rds-extended-support-for-mysql-databases-on-amazon-aurora-and-amazon-rds/ \n[9] https://aws.amazon.com/rds/aurora/pricing/#Amazon_RDS_Extended_Support_costs \n[10] https://repost.aws/ \n[11] https://aws.amazon.com/support"}, "endTime": 1723161600, "eventTypeCategory": "scheduledChange", "eventTypeCode": "AWS_RDS_PLANNED_LIFECYCLE_EVENT", "lastUpdatedTime": "2024-07-17 07:12:31.418000+02:00", "region": "us-east-1", "service": "RDS", "startTime": "1730358000", "statusCode": "upcoming"}, {"AccountName": "NOVARTIS-RDRAR06.DEV", "AffectedResources": ["arn:aws:rds:us-east-1:859080920852:cluster:auroramysql0310"], "ClarityID": "043745", "arn": "arn:aws:health:us-east-1::event/RDS/AWS_RDS_PLANNED_LIFECYCLE_EVENT/AWS_RDS_PLANNED_LIFECYCLE_EVENT_57cd2489096ca26892be454df9b0aa886843cf3c1aa60e8c1654b5db9e6220f4", "awsAccountId": "859080920852", "description": {"latestDescription": "[AWS Health may periodically trigger reminder notifications about this communication if resources remain unresolved.]\n\nYou are receiving this message because you have one or more Amazon Aurora MySQL clusters running a version of Aurora MySQL 2 (with MySQL 5.7 compatibility) on a provisioned instance in the US-EAST-1 Region. If you are running Amazon Aurora MySQL 2 (with MySQL 5.7 compatibility) in an Aurora Serverless v1 cluster, this communication does not apply to you.\n\nAmazon Aurora MySQL 2 (with MySQL 5.7 compatibility) will reach end of standard support on October 31, 2024. We are providing you with a 6-month reminder, following up from our previous 12-month notice, so you have sufficient time to upgrade your database cluster(s). Please note that upgrading between major versions requires more extensive planning and testing than for a minor version and the process can take substantial time.\n\nWe recommend that you upgrade your databases to the latest patch of the default minor version of Amazon Aurora MySQL 3 (currently Aurora MySQL 3.04) or higher, at your earliest convenience before October 31, 2024. For how to do the upgrades please consult our documentation [1]. Upgrades may be performed using in-place upgrade [2], snapshot and restore [3], or a high availability blue-green upgrade technique which can be fully managed using Amazon RDS Blue/Green Deployments [4]. The amount of downtime your system will experience depends on the upgrade technique chosen, as well as properties of your schema.\n\nMajor version upgrades will require downtime and might require manual intervention and application changes. We will send you updates and reminders before the standard support deadline. You can find the latest information needed to plan your upgrade in our 'User Guide for Aurora' [5].\n\nThe affected clusters are listed in the 'Affected resources' tab. You can also find clusters which are affected by this deprecation notice by referring to the following user guide [6].\n\nAmazon Aurora MySQL provides you with one year of free extended support over community MySQL 5.7, that reached end of life on October 31, 2023. If you need more time to complete the upgrades, you can use Amazon RDS Extended Support [7] for Aurora MySQL 2. RDS Extended Support [8] for Aurora is a paid service [9] that will provide up to 28 additional months of support for Aurora MySQL 2 until the end of extended support in February 2027. After October 31, 2024 all your databases continue running Aurora MySQL 2 will be automatically enrolled in RDS Extended Support. Charges for RDS Extended Support will start accruing from December 1, 2024. RDS Extended Support will only be offered for Aurora MySQL minor versions 2.11 and 2.12. If you plan to use Amazon Aurora MySQL 2 beyond end of standard support, please plan to be running your database(s) on one of these minor versions before October 31, 2024. If your databases are not running Aurora MySQL minor versions 2.11 or 2.12 by October 31, 2024 they will be upgraded before being enrolled into RDS Extended Support. This upgrade will occur during your maintenance window and can not be turned off. \n\nShould you have any questions or concerns, the AWS Support Team is available on AWS re:Post [10] and via AWS Support. [11]\n\n[1] https://docs.aws.amazon.com/AmazonRDS/latest/AuroraUserGuide/AuroraMySQL.Updates.MajorVersionUpgrade.html#AuroraMySQL.Updates.MajorVersionUpgrade.2to3 \n[2] https://docs.aws.amazon.com/AmazonRDS/latest/AuroraUserGuide/AuroraMySQL.Updates.MajorVersionUpgrade.html#AuroraMySQL.Upgrading.Procedure \n[3] https://docs.aws.amazon.com/AmazonRDS/latest/AuroraUserGuide/aurora-restore-snapshot.html \n[4] https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/blue-green-deployments.html \n[5] https://docs.aws.amazon.com/AmazonRDS/latest/AuroraUserGuide/Aurora.MySQL57.EOL.html \n[6] https://docs.aws.amazon.com/AmazonRDS/latest/AuroraUserGuide/Aurora.MySQL57.EOL.html#find-cluster \n[7] https://docs.aws.amazon.com/AmazonRDS/latest/AuroraUserGuide/extended-support.html \n[8] https://aws.amazon.com/blogs/database/introducing-amazon-rds-extended-support-for-mysql-databases-on-amazon-aurora-and-amazon-rds/ \n[9] https://aws.amazon.com/rds/aurora/pricing/#Amazon_RDS_Extended_Support_costs \n[10] https://repost.aws/ \n[11] https://aws.amazon.com/support"}, "endTime": null, "eventTypeCategory": "scheduledChange", "eventTypeCode": "AWS_RDS_PLANNED_LIFECYCLE_EVENT", "lastUpdatedTime": "2024-07-17 07:12:31.418000+02:00", "region": "us-east-1", "service": "RDS", "startTime": "1730358000", "statusCode": "upcoming"}, {"AccountName": "NOVARTIS.RDRAR01.TST", "AffectedResources": ["arn:aws:eks:eu-west-1:061682462865:cluster/vinitpoc-starburst02"], "ClarityID": "043745", "arn": "arn:aws:health:eu-west-1::event/EKS/AWS_EKS_PLANNED_LIFECYCLE_EVENT/AWS_EKS_PLANNED_LIFECYCLE_EVENT_2d863a19850ab7693a21f71712db2cc1d4e07330d196ee9b78273ecfb0640c97", "awsAccountId": "061682462865", "description": {"latestDescription": "You are receiving this message because you currently have one or more Amazon EKS clusters running on Kubernetes version 1.27. If you have deleted this instance(s), or already upgraded your EKS cluster(s), you can disregard the rest of this message.\n\n Standard support for Kubernetes version 1.27 in Amazon EKS will end on July 24, 2024, and on July 25, 2024 Amazon EKS clusters running on Kubernetes version 1.27 will enter extended support. Kubernetes version 1.27 will remain in extended support until July 24, 2025. After July 24, 2025, Kubernetes version 1.27 will no longer be supported on Amazon EKS, and all Amazon EKS clusters running on 1.27 will be automatically updated to Kubernetes version 1.28.\n\nA list of your impacted resources can be found in the 'Affected resources' tab. \n\nIf you do not want to use extended support, we recommend that you update your 1.27 clusters to Kubernetes version 1.28 or newer before July 24, 2024. To learn more about the extended support for Kubernetes versions pricing, see our pricing page [1]. For instructions on how to update your cluster(s), see the Amazon EKS service documentation [2]. \n\nTo learn more on Kubernetes version support, see the Amazon EKS service documentation [3].\n\nFor any questions or assistance, please contact AWS Support [4].\n\n[1] https://aws.amazon.com/eks/pricing/\n[2] https://docs.aws.amazon.com/eks/latest/userguide/update-cluster.html\n[3] https://docs.aws.amazon.com/eks/latest/userguide/kubernetes-versions.html\n[4] https://aws.amazon.com/support"}, "endTime": 1723161644, "eventTypeCategory": "scheduledChange", "eventTypeCode": "AWS_EKS_PLANNED_LIFECYCLE_EVENT", "lastUpdatedTime": "2024-05-10 15:00:30.363000+02:00", "region": "eu-west-1", "service": "EKS", "startTime": "1721804400", "statusCode": "upcoming"}, {"AccountName": "NVSGISRSA.GB", "AffectedResources": "arn:aws:eks:eu-west-1:128010802554:cluster/EKS-COLLIBRA-54124-EU-PRD01-001-127", "ClarityID": "043745", "arn": "arn:aws:health:eu-west-1::event/EKS/AWS_EKS_PLANNED_LIFECYCLE_EVENT/AWS_EKS_PLANNED_LIFECYCLE_EVENT_2d863a19850ab7693a21f71712db2cc1d4e07330d196ee9b78273ecfb0640c97", "awsAccountId": "128010802554", "description": {"latestDescription": "You are receiving this message because you currently have one or more Amazon EKS clusters running on Kubernetes version 1.27. If you have deleted this instance(s), or already upgraded your EKS cluster(s), you can disregard the rest of this message.\n\n Standard support for Kubernetes version 1.27 in Amazon EKS will end on July 24, 2024, and on July 25, 2024 Amazon EKS clusters running on Kubernetes version 1.27 will enter extended support. Kubernetes version 1.27 will remain in extended support until July 24, 2025. After July 24, 2025, Kubernetes version 1.27 will no longer be supported on Amazon EKS, and all Amazon EKS clusters running on 1.27 will be automatically updated to Kubernetes version 1.28.\n\nA list of your impacted resources can be found in the 'Affected resources' tab. \n\nIf you do not want to use extended support, we recommend that you update your 1.27 clusters to Kubernetes version 1.28 or newer before July 24, 2024. To learn more about the extended support for Kubernetes versions pricing, see our pricing page [1]. For instructions on how to update your cluster(s), see the Amazon EKS service documentation [2]. \n\nTo learn more on Kubernetes version support, see the Amazon EKS service documentation [3].\n\nFor any questions or assistance, please contact AWS Support [4].\n\n[1] https://aws.amazon.com/eks/pricing/\n[2] https://docs.aws.amazon.com/eks/latest/userguide/update-cluster.html\n[3] https://docs.aws.amazon.com/eks/latest/userguide/kubernetes-versions.html\n[4] https://aws.amazon.com/support"}, "endTime": null, "eventTypeCategory": "scheduledChange", "eventTypeCode": "AWS_EKS_PLANNED_LIFECYCLE_EVENT", "lastUpdatedTime": "2024-05-10 20:00:54.990000+02:00", "region": "eu-west-1", "service": "EKS", "startTime": "1721804400", "statusCode": "upcoming"}, {"AccountName": "NVSGISRSA.GB", "AffectedResources": "arn:aws:eks:eu-west-1:128010802554:cluster/EKS-COLLIBRA-54124-EU-PPRD01-001-127", "ClarityID": "043745", "arn": "arn:aws:health:eu-west-1::event/EKS/AWS_EKS_PLANNED_LIFECYCLE_EVENT/AWS_EKS_PLANNED_LIFECYCLE_EVENT_2d863a19850ab7693a21f71712db2cc1d4e07330d196ee9b78273ecfb0640c97", "awsAccountId": "128010802554", "description": {"latestDescription": "You are receiving this message because you currently have one or more Amazon EKS clusters running on Kubernetes version 1.27. If you have deleted this instance(s), or already upgraded your EKS cluster(s), you can disregard the rest of this message.\n\n Standard support for Kubernetes version 1.27 in Amazon EKS will end on July 24, 2024, and on July 25, 2024 Amazon EKS clusters running on Kubernetes version 1.27 will enter extended support. Kubernetes version 1.27 will remain in extended support until July 24, 2025. After July 24, 2025, Kubernetes version 1.27 will no longer be supported on Amazon EKS, and all Amazon EKS clusters running on 1.27 will be automatically updated to Kubernetes version 1.28.\n\nA list of your impacted resources can be found in the 'Affected resources' tab. \n\nIf you do not want to use extended support, we recommend that you update your 1.27 clusters to Kubernetes version 1.28 or newer before July 24, 2024. To learn more about the extended support for Kubernetes versions pricing, see our pricing page [1]. For instructions on how to update your cluster(s), see the Amazon EKS service documentation [2]. \n\nTo learn more on Kubernetes version support, see the Amazon EKS service documentation [3].\n\nFor any questions or assistance, please contact AWS Support [4].\n\n[1] https://aws.amazon.com/eks/pricing/\n[2] https://docs.aws.amazon.com/eks/latest/userguide/update-cluster.html\n[3] https://docs.aws.amazon.com/eks/latest/userguide/kubernetes-versions.html\n[4] https://aws.amazon.com/support"}, "endTime": 1723115399, "eventTypeCategory": "scheduledChange", "eventTypeCode": "AWS_EKS_PLANNED_LIFECYCLE_EVENT", "lastUpdatedTime": "2024-05-10 20:00:54.990000+02:00", "region": "eu-west-1", "service": "EKS", "startTime": "1721804400", "statusCode": "upcoming"}, {"AccountName": "NVSGISRSB.GB", "AffectedResources": "arn:aws:eks:eu-west-1:866919043554:cluster/EKS-COLLIBRA-54124-EU-DEV01-001-127", "ClarityID": "043745", "arn": "arn:aws:health:eu-west-1::event/EKS/AWS_EKS_PLANNED_LIFECYCLE_EVENT/AWS_EKS_PLANNED_LIFECYCLE_EVENT_2d863a19850ab7693a21f71712db2cc1d4e07330d196ee9b78273ecfb0640c97", "awsAccountId": "866919043554", "description": {"latestDescription": "You are receiving this message because you currently have one or more Amazon EKS clusters running on Kubernetes version 1.27. If you have deleted this instance(s), or already upgraded your EKS cluster(s), you can disregard the rest of this message.\n\n Standard support for Kubernetes version 1.27 in Amazon EKS will end on July 24, 2024, and on July 25, 2024 Amazon EKS clusters running on Kubernetes version 1.27 will enter extended support. Kubernetes version 1.27 will remain in extended support until July 24, 2025. After July 24, 2025, Kubernetes version 1.27 will no longer be supported on Amazon EKS, and all Amazon EKS clusters running on 1.27 will be automatically updated to Kubernetes version 1.28.\n\nA list of your impacted resources can be found in the 'Affected resources' tab. \n\nIf you do not want to use extended support, we recommend that you update your 1.27 clusters to Kubernetes version 1.28 or newer before July 24, 2024. To learn more about the extended support for Kubernetes versions pricing, see our pricing page [1]. For instructions on how to update your cluster(s), see the Amazon EKS service documentation [2]. \n\nTo learn more on Kubernetes version support, see the Amazon EKS service documentation [3].\n\nFor any questions or assistance, please contact AWS Support [4].\n\n[1] https://aws.amazon.com/eks/pricing/\n[2] https://docs.aws.amazon.com/eks/latest/userguide/update-cluster.html\n[3] https://docs.aws.amazon.com/eks/latest/userguide/kubernetes-versions.html\n[4] https://aws.amazon.com/support"}, "endTime": 1723161644, "eventTypeCategory": "scheduledChange", "eventTypeCode": "AWS_EKS_PLANNED_LIFECYCLE_EVENT", "lastUpdatedTime": "2024-05-24 23:22:18.987000+02:00", "region": "eu-west-1", "service": "EKS", "startTime": "1721804400", "statusCode": "upcoming"}, {"AccountName": "NOVARTIS.RDRAR01.TST", "AffectedResources": ["arn:aws:rds:eu-west-1:061682462865:db:aurorapostgressql-instance-1", "arn:aws:rds:eu-west-1:061682462865:db:auroramysqlcompatible-instance-1", "arn:aws:rds:eu-west-1:061682462865:db:rds-prv-link", "arn:aws:rds:eu-west-1:061682462865:db:testingmigration", "arn:aws:rds:eu-west-1:061682462865:db:mysqlintsancepoc", "arn:aws:rds:eu-west-1:061682462865:db:mariabds", "arn:aws:rds:eu-west-1:061682462865:db:postgrespoc"], "ClarityID": "043745", "arn": "arn:aws:health:eu-west-1::event/RDS/AWS_RDS_PLANNED_LIFECYCLE_EVENT/AWS_RDS_PLANNED_LIFECYCLE_EVENT_ff68ef5fa78dd18d71ad094b7f088d03f64b683700cfca15c99c49c439e33105", "awsAccountId": "061682462865", "description": {"latestDescription": "[AWS Health may periodically trigger reminder notifications about this communication if resources remain unresolved.]\n\nYou are receiving this message because your AWS Account has one or more Amazon RDS, or Amazon Aurora database instances in the EU-WEST-1 Region using a SSL/TLS Certificate that is expiring on August 22, 2024.\n\nA list of your affected resources can be found in the 'Affected resources' tab.\n\nThis is a follow-up notification for SSL/TLS CA certification expiration. If you believe you have already finished this work and still received this email, it is likely because you created new instances using the 2019 Certificate Authority (CA). After January 25, 2024 all newly created instances that do not explicitly specify a different CA will use the \u2018rds-ca-rsa2048-g1\u2019 CA. For information on setting an account level CA override, see the modify-certificates API documentation [1].\n\nIf your applications connect to these instances using the SSL/TLS protocol, you will need to take action before August 22, 2024 to prevent connectivity failures to your existing database instances. Even if you do not currently use SSL for your connections, you could still be affected if your databases server certificate expires, so we still recommend updating your CA.\n\nTo protect your communications with your database instances, a CA generates time-bound certificates that are checked by your database client software to authenticate any database instance before exchanging information. Following industry best practices, AWS renews the CA and creates new certificates on a routine basis to ensure customer connections are properly protected for years to come. The current CA in the EU-WEST-1 Region will expire on August 22, 2024. Before this date you will need to update your DB server certificate. The following is the general process to do this:\n\nFirst, update your application clients with the new certificate, if your application client is using a trust store then add the new CA certificates into the trust stores of your client applications. RDS provides download links to the CA certificates in our User Guide [2]. For more detailed instructions on updating the trust stores on your client application see our documentation [3].\n\nSecond, update the certificate on all your affected database instances to one of the newly issued CAs. \u2018rds-ca-rsa2048-g1\u2019 is the default recommended CA because there is no algorithm change. The other CAs use new key algorithms so it could require more testing of your client setup to ensure compatibility. For more information on the new CAs see our documentation [4].\n\nThird, if you want to use a different CA than the default \u2018rds-ca-rsa2048-g1\u2019, you will need to set an account level CA override so your new instances will use the CA of your choice. To do this a modify-certificates API is available that will allow you to override the default CA on newly created database instances to either the old or one of the new CAs. This override will only apply while the CA you are overriding to is valid. To use this API you will need to be running the AWS CLI version 1.17 or later. For more information see the modify-certificates API documentation [1]. There is also a describe-certificates API [5], that will indicate your current default CA override if you have one set. To set a specific CA during instance creation use the ca-certificate-identifier option on the create-db-instance API to create a DB instance with a specific CA. For more information, see the create-db-instance API documentation [6].\n\nFor more detailed instructions on how to perform these updates, please see the Amazon RDS instances [7] and Amazon Aurora instances [8] documentation.\n\nPlease be aware of the following timeline:\n\n1. As soon as possible - You should update your client trust store, then you can update your instances server certificate to one generated by one of the new CAs.\n\n2. After January 26, 2024 - any new database instances default to using the \u2018rds-ca-rsa2048-g1\u2019 certificate. If you wish for new instances to use a different certificate, you can specify which certificate to use with the AWS console or the AWS CLI. For more information, see the create-db-instance API documentation [6].\n\n3. After August 22, 2024 - \u2018rds-ca-2019\u2019 will expire. You will need to take action before August 22, 2024, to prevent connectivity failures to your existing database instances.\n\nFor more information see our blog [9], and if you have questions or concerns, please contact AWS Support [10].\n\n[1] https://docs.aws.amazon.com/cli/latest/reference/rds/modify-certificates.html\n[2] https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/UsingWithRDS.SSL.html#UsingWithRDS.SSL.CertificatesAllRegions\n[3] https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/UsingWithRDS.SSL-certificate-rotation.html#UsingWithRDS.SSL-certificate-rotation-updating\n[4] https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/UsingWithRDS.SSL.html#UsingWithRDS.SSL.RegionCertificateAuthorities\n[5] https://docs.aws.amazon.com/cli/latest/reference/rds/describe-certificates.html\n[6] https://docs.aws.amazon.com/cli/latest/reference/rds/create-db-instance.html\n[7] https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/UsingWithRDS.SSL-certificate-rotation.html\n[8] https://docs.aws.amazon.com/AmazonRDS/latest/AuroraUserGuide/UsingWithRDS.SSL-certificate-rotation.html\n[9] https://aws.amazon.com/blogs/aws/rotate-your-ssl-tls-certificates-now-amazon-rds-and-amazon-aurora-expire-in-2024/\n[10] https://console.aws.amazon.com/support/home"}, "endTime": null, "eventTypeCategory": "scheduledChange", "eventTypeCode": "AWS_RDS_PLANNED_LIFECYCLE_EVENT", "lastUpdatedTime": "2024-07-03 08:39:29.719000+02:00", "region": "eu-west-1", "service": "RDS", "startTime": "1724310000", "statusCode": "upcoming"}, {"AccountName": "NVSGISRCC.GB", "AffectedResources": "arn:aws:rds:eu-west-1:304512965277:db:connsbxprd01", "ClarityID": "043745", "arn": "arn:aws:health:eu-west-1::event/RDS/AWS_RDS_PLANNED_LIFECYCLE_EVENT/AWS_RDS_PLANNED_LIFECYCLE_EVENT_ff68ef5fa78dd18d71ad094b7f088d03f64b683700cfca15c99c49c439e33105", "awsAccountId": "304512965277", "description": {"latestDescription": "[AWS Health may periodically trigger reminder notifications about this communication if resources remain unresolved.]\n\nYou are receiving this message because your AWS Account has one or more Amazon RDS, or Amazon Aurora database instances in the EU-WEST-1 Region using a SSL/TLS Certificate that is expiring on August 22, 2024.\n\nA list of your affected resources can be found in the 'Affected resources' tab.\n\nThis is a follow-up notification for SSL/TLS CA certification expiration. If you believe you have already finished this work and still received this email, it is likely because you created new instances using the 2019 Certificate Authority (CA). After January 25, 2024 all newly created instances that do not explicitly specify a different CA will use the \u2018rds-ca-rsa2048-g1\u2019 CA. For information on setting an account level CA override, see the modify-certificates API documentation [1].\n\nIf your applications connect to these instances using the SSL/TLS protocol, you will need to take action before August 22, 2024 to prevent connectivity failures to your existing database instances. Even if you do not currently use SSL for your connections, you could still be affected if your databases server certificate expires, so we still recommend updating your CA.\n\nTo protect your communications with your database instances, a CA generates time-bound certificates that are checked by your database client software to authenticate any database instance before exchanging information. Following industry best practices, AWS renews the CA and creates new certificates on a routine basis to ensure customer connections are properly protected for years to come. The current CA in the EU-WEST-1 Region will expire on August 22, 2024. Before this date you will need to update your DB server certificate. The following is the general process to do this:\n\nFirst, update your application clients with the new certificate, if your application client is using a trust store then add the new CA certificates into the trust stores of your client applications. RDS provides download links to the CA certificates in our User Guide [2]. For more detailed instructions on updating the trust stores on your client application see our documentation [3].\n\nSecond, update the certificate on all your affected database instances to one of the newly issued CAs. \u2018rds-ca-rsa2048-g1\u2019 is the default recommended CA because there is no algorithm change. The other CAs use new key algorithms so it could require more testing of your client setup to ensure compatibility. For more information on the new CAs see our documentation [4].\n\nThird, if you want to use a different CA than the default \u2018rds-ca-rsa2048-g1\u2019, you will need to set an account level CA override so your new instances will use the CA of your choice. To do this a modify-certificates API is available that will allow you to override the default CA on newly created database instances to either the old or one of the new CAs. This override will only apply while the CA you are overriding to is valid. To use this API you will need to be running the AWS CLI version 1.17 or later. For more information see the modify-certificates API documentation [1]. There is also a describe-certificates API [5], that will indicate your current default CA override if you have one set. To set a specific CA during instance creation use the ca-certificate-identifier option on the create-db-instance API to create a DB instance with a specific CA. For more information, see the create-db-instance API documentation [6].\n\nFor more detailed instructions on how to perform these updates, please see the Amazon RDS instances [7] and Amazon Aurora instances [8] documentation.\n\nPlease be aware of the following timeline:\n\n1. As soon as possible - You should update your client trust store, then you can update your instances server certificate to one generated by one of the new CAs.\n\n2. After January 26, 2024 - any new database instances default to using the \u2018rds-ca-rsa2048-g1\u2019 certificate. If you wish for new instances to use a different certificate, you can specify which certificate to use with the AWS console or the AWS CLI. For more information, see the create-db-instance API documentation [6].\n\n3. After August 22, 2024 - \u2018rds-ca-2019\u2019 will expire. You will need to take action before August 22, 2024, to prevent connectivity failures to your existing database instances.\n\nFor more information see our blog [9], and if you have questions or concerns, please contact AWS Support [10].\n\n[1] https://docs.aws.amazon.com/cli/latest/reference/rds/modify-certificates.html\n[2] https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/UsingWithRDS.SSL.html#UsingWithRDS.SSL.CertificatesAllRegions\n[3] https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/UsingWithRDS.SSL-certificate-rotation.html#UsingWithRDS.SSL-certificate-rotation-updating\n[4] https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/UsingWithRDS.SSL.html#UsingWithRDS.SSL.RegionCertificateAuthorities\n[5] https://docs.aws.amazon.com/cli/latest/reference/rds/describe-certificates.html\n[6] https://docs.aws.amazon.com/cli/latest/reference/rds/create-db-instance.html\n[7] https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/UsingWithRDS.SSL-certificate-rotation.html\n[8] https://docs.aws.amazon.com/AmazonRDS/latest/AuroraUserGuide/UsingWithRDS.SSL-certificate-rotation.html\n[9] https://aws.amazon.com/blogs/aws/rotate-your-ssl-tls-certificates-now-amazon-rds-and-amazon-aurora-expire-in-2024/\n[10] https://console.aws.amazon.com/support/home"}, "endTime": 1723161644, "eventTypeCategory": "scheduledChange", "eventTypeCode": "AWS_RDS_PLANNED_LIFECYCLE_EVENT", "lastUpdatedTime": "2024-07-03 08:39:29.719000+02:00", "region": "eu-west-1", "service": "RDS", "startTime": "1724310000", "statusCode": "upcoming"}, {"AccountName": "NVSGISRSB.GB", "AffectedResources": "arn:aws:rds:eu-west-1:866919043554:db:gisdev03", "ClarityID": "043745", "arn": "arn:aws:health:eu-west-1::event/RDS/AWS_RDS_PLANNED_LIFECYCLE_EVENT/AWS_RDS_PLANNED_LIFECYCLE_EVENT_ff68ef5fa78dd18d71ad094b7f088d03f64b683700cfca15c99c49c439e33105", "awsAccountId": "866919043554", "description": {"latestDescription": "[AWS Health may periodically trigger reminder notifications about this communication if resources remain unresolved.]\n\nYou are receiving this message because your AWS Account has one or more Amazon RDS, or Amazon Aurora database instances in the EU-WEST-1 Region using a SSL/TLS Certificate that is expiring on August 22, 2024.\n\nA list of your affected resources can be found in the 'Affected resources' tab.\n\nThis is a follow-up notification for SSL/TLS CA certification expiration. If you believe you have already finished this work and still received this email, it is likely because you created new instances using the 2019 Certificate Authority (CA). After January 25, 2024 all newly created instances that do not explicitly specify a different CA will use the \u2018rds-ca-rsa2048-g1\u2019 CA. For information on setting an account level CA override, see the modify-certificates API documentation [1].\n\nIf your applications connect to these instances using the SSL/TLS protocol, you will need to take action before August 22, 2024 to prevent connectivity failures to your existing database instances. Even if you do not currently use SSL for your connections, you could still be affected if your databases server certificate expires, so we still recommend updating your CA.\n\nTo protect your communications with your database instances, a CA generates time-bound certificates that are checked by your database client software to authenticate any database instance before exchanging information. Following industry best practices, AWS renews the CA and creates new certificates on a routine basis to ensure customer connections are properly protected for years to come. The current CA in the EU-WEST-1 Region will expire on August 22, 2024. Before this date you will need to update your DB server certificate. The following is the general process to do this:\n\nFirst, update your application clients with the new certificate, if your application client is using a trust store then add the new CA certificates into the trust stores of your client applications. RDS provides download links to the CA certificates in our User Guide [2]. For more detailed instructions on updating the trust stores on your client application see our documentation [3].\n\nSecond, update the certificate on all your affected database instances to one of the newly issued CAs. \u2018rds-ca-rsa2048-g1\u2019 is the default recommended CA because there is no algorithm change. The other CAs use new key algorithms so it could require more testing of your client setup to ensure compatibility. For more information on the new CAs see our documentation [4].\n\nThird, if you want to use a different CA than the default \u2018rds-ca-rsa2048-g1\u2019, you will need to set an account level CA override so your new instances will use the CA of your choice. To do this a modify-certificates API is available that will allow you to override the default CA on newly created database instances to either the old or one of the new CAs. This override will only apply while the CA you are overriding to is valid. To use this API you will need to be running the AWS CLI version 1.17 or later. For more information see the modify-certificates API documentation [1]. There is also a describe-certificates API [5], that will indicate your current default CA override if you have one set. To set a specific CA during instance creation use the ca-certificate-identifier option on the create-db-instance API to create a DB instance with a specific CA. For more information, see the create-db-instance API documentation [6].\n\nFor more detailed instructions on how to perform these updates, please see the Amazon RDS instances [7] and Amazon Aurora instances [8] documentation.\n\nPlease be aware of the following timeline:\n\n1. As soon as possible - You should update your client trust store, then you can update your instances server certificate to one generated by one of the new CAs.\n\n2. After January 26, 2024 - any new database instances default to using the \u2018rds-ca-rsa2048-g1\u2019 certificate. If you wish for new instances to use a different certificate, you can specify which certificate to use with the AWS console or the AWS CLI. For more information, see the create-db-instance API documentation [6].\n\n3. After August 22, 2024 - \u2018rds-ca-2019\u2019 will expire. You will need to take action before August 22, 2024, to prevent connectivity failures to your existing database instances.\n\nFor more information see our blog [9], and if you have questions or concerns, please contact AWS Support [10].\n\n[1] https://docs.aws.amazon.com/cli/latest/reference/rds/modify-certificates.html\n[2] https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/UsingWithRDS.SSL.html#UsingWithRDS.SSL.CertificatesAllRegions\n[3] https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/UsingWithRDS.SSL-certificate-rotation.html#UsingWithRDS.SSL-certificate-rotation-updating\n[4] https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/UsingWithRDS.SSL.html#UsingWithRDS.SSL.RegionCertificateAuthorities\n[5] https://docs.aws.amazon.com/cli/latest/reference/rds/describe-certificates.html\n[6] https://docs.aws.amazon.com/cli/latest/reference/rds/create-db-instance.html\n[7] https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/UsingWithRDS.SSL-certificate-rotation.html\n[8] https://docs.aws.amazon.com/AmazonRDS/latest/AuroraUserGuide/UsingWithRDS.SSL-certificate-rotation.html\n[9] https://aws.amazon.com/blogs/aws/rotate-your-ssl-tls-certificates-now-amazon-rds-and-amazon-aurora-expire-in-2024/\n[10] https://console.aws.amazon.com/support/home"}, "endTime": null, "eventTypeCategory": "scheduledChange", "eventTypeCode": "AWS_RDS_PLANNED_LIFECYCLE_EVENT", "lastUpdatedTime": "2024-07-15 06:00:14.321000+02:00", "region": "eu-west-1", "service": "RDS", "startTime": "1724310000", "statusCode": "upcoming"}, {"AccountName": "NVSGISRCC.TST", "AffectedResources": ["arn:aws:rds:eu-west-1:900804374729:db:database-testing-manage-instance-1", "arn:aws:rds:eu-west-1:900804374729:db:complete-ec220feb", "arn:aws:rds:eu-west-1:900804374729:db:test-db-instance-1", "arn:aws:rds:eu-west-1:900804374729:db:test-db-instance-1-eu-west-1b", "arn:aws:rds:eu-west-1:900804374729:db:readerinstance"], "ClarityID": "043745", "arn": "arn:aws:health:eu-west-1::event/RDS/AWS_RDS_PLANNED_LIFECYCLE_EVENT/AWS_RDS_PLANNED_LIFECYCLE_EVENT_ff68ef5fa78dd18d71ad094b7f088d03f64b683700cfca15c99c49c439e33105", "awsAccountId": "900804374729", "description": {"latestDescription": "[AWS Health may periodically trigger reminder notifications about this communication if resources remain unresolved.]\n\nYou are receiving this message because your AWS Account has one or more Amazon RDS, or Amazon Aurora database instances in the EU-WEST-1 Region using a SSL/TLS Certificate that is expiring on August 22, 2024.\n\nA list of your affected resources can be found in the 'Affected resources' tab.\n\nThis is a follow-up notification for SSL/TLS CA certification expiration. If you believe you have already finished this work and still received this email, it is likely because you created new instances using the 2019 Certificate Authority (CA). After January 25, 2024 all newly created instances that do not explicitly specify a different CA will use the \u2018rds-ca-rsa2048-g1\u2019 CA. For information on setting an account level CA override, see the modify-certificates API documentation [1].\n\nIf your applications connect to these instances using the SSL/TLS protocol, you will need to take action before August 22, 2024 to prevent connectivity failures to your existing database instances. Even if you do not currently use SSL for your connections, you could still be affected if your databases server certificate expires, so we still recommend updating your CA.\n\nTo protect your communications with your database instances, a CA generates time-bound certificates that are checked by your database client software to authenticate any database instance before exchanging information. Following industry best practices, AWS renews the CA and creates new certificates on a routine basis to ensure customer connections are properly protected for years to come. The current CA in the EU-WEST-1 Region will expire on August 22, 2024. Before this date you will need to update your DB server certificate. The following is the general process to do this:\n\nFirst, update your application clients with the new certificate, if your application client is using a trust store then add the new CA certificates into the trust stores of your client applications. RDS provides download links to the CA certificates in our User Guide [2]. For more detailed instructions on updating the trust stores on your client application see our documentation [3].\n\nSecond, update the certificate on all your affected database instances to one of the newly issued CAs. \u2018rds-ca-rsa2048-g1\u2019 is the default recommended CA because there is no algorithm change. The other CAs use new key algorithms so it could require more testing of your client setup to ensure compatibility. For more information on the new CAs see our documentation [4].\n\nThird, if you want to use a different CA than the default \u2018rds-ca-rsa2048-g1\u2019, you will need to set an account level CA override so your new instances will use the CA of your choice. To do this a modify-certificates API is available that will allow you to override the default CA on newly created database instances to either the old or one of the new CAs. This override will only apply while the CA you are overriding to is valid. To use this API you will need to be running the AWS CLI version 1.17 or later. For more information see the modify-certificates API documentation [1]. There is also a describe-certificates API [5], that will indicate your current default CA override if you have one set. To set a specific CA during instance creation use the ca-certificate-identifier option on the create-db-instance API to create a DB instance with a specific CA. For more information, see the create-db-instance API documentation [6].\n\nFor more detailed instructions on how to perform these updates, please see the Amazon RDS instances [7] and Amazon Aurora instances [8] documentation.\n\nPlease be aware of the following timeline:\n\n1. As soon as possible - You should update your client trust store, then you can update your instances server certificate to one generated by one of the new CAs.\n\n2. After January 26, 2024 - any new database instances default to using the \u2018rds-ca-rsa2048-g1\u2019 certificate. If you wish for new instances to use a different certificate, you can specify which certificate to use with the AWS console or the AWS CLI. For more information, see the create-db-instance API documentation [6].\n\n3. After August 22, 2024 - \u2018rds-ca-2019\u2019 will expire. You will need to take action before August 22, 2024, to prevent connectivity failures to your existing database instances.\n\nFor more information see our blog [9], and if you have questions or concerns, please contact AWS Support [10].\n\n[1] https://docs.aws.amazon.com/cli/latest/reference/rds/modify-certificates.html\n[2] https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/UsingWithRDS.SSL.html#UsingWithRDS.SSL.CertificatesAllRegions\n[3] https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/UsingWithRDS.SSL-certificate-rotation.html#UsingWithRDS.SSL-certificate-rotation-updating\n[4] https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/UsingWithRDS.SSL.html#UsingWithRDS.SSL.RegionCertificateAuthorities\n[5] https://docs.aws.amazon.com/cli/latest/reference/rds/describe-certificates.html\n[6] https://docs.aws.amazon.com/cli/latest/reference/rds/create-db-instance.html\n[7] https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/UsingWithRDS.SSL-certificate-rotation.html\n[8] https://docs.aws.amazon.com/AmazonRDS/latest/AuroraUserGuide/UsingWithRDS.SSL-certificate-rotation.html\n[9] https://aws.amazon.com/blogs/aws/rotate-your-ssl-tls-certificates-now-amazon-rds-and-amazon-aurora-expire-in-2024/\n[10] https://console.aws.amazon.com/support/home"}, "endTime": null, "eventTypeCategory": "scheduledChange", "eventTypeCode": "AWS_RDS_PLANNED_LIFECYCLE_EVENT", "lastUpdatedTime": "2024-07-03 08:39:29.719000+02:00", "region": "eu-west-1", "service": "RDS", "startTime": "1724310000", "statusCode": "upcoming"}, {"AccountName": "NOVARTIS-RDRAR01.DEV", "AffectedResources": ["arn:aws:dms:us-east-1:rep:SWSV6JFHIHG2WCZKR47LSZAIDL4YYPYGFUOADCY", "arn:aws:dms:us-east-1:079269666815:rep:SWSV6JFHIHG2WCZKR47LSZAIDL4YYPYGFUOADCY"], "ClarityID": "043745", "arn": "arn:aws:health:us-east-1::event/DMS/AWS_DMS_PLANNED_LIFECYCLE_EVENT/AWS_DMS_PLANNED_LIFECYCLE_EVENT_3aad32bd4a49bb132e38b1594afc5e65110887c3c01847254c117c612e1af956", "awsAccountId": "079269666815", "description": {"latestDescription": "[AWS Health may periodically trigger reminder notifications about this communication if resources remain unresolved.]\n\nYou are receiving this message because you have one or more instances running AWS Database Migration Service (DMS) version 3.4.7. In order to give customers more time to plan and upgrade their replication instance version, we are extending the previously announced deprecation date to October 31, 2024 (and in consequence September 30, 2024, as the start of no new instance create date).\n\nIf you have already upgraded your AWS Database Migration Service (DMS) you can disregard the rest of this message. Please note that after this period, any instances still running this version will be upgraded to the latest DMS release even if they have not enabled for auto-upgrade. Please contact AWS Support [1] if you have issues preventing you from successfully upgrading to 3.5.1. DMS will not perform upgrades if a customer issue caused by upgrading to DMS 3.5.1 is observed.\n\nA list of your impacted resource(s) can be found in the 'Affected resources' tab.\n\nYou can initiate an upgrade when it is convenient for you by completing the following steps:\n\n1. Go to the \"Replication instances\" tab in the AWS DMS Management Console\n2. Select the instance to upgrade\n3. Click Modify, and change the \"Replication engine version\" setting to the latest available version.\n\nNote: If you choose the \"Apply changes immediately\" option, the upgrade will be initiated immediately after clicking the \"Modify\" button. If you choose not to apply the change immediately, the upgrade will be performed during your configured maintenance window. To learn more about the AWS DMS maintenance and upgrade process, please review our 'Working with replication engine versions' documentation [2].\n\nFor migration tasks that are running, tables in the full load phase at the time of the upgrade will be reloaded from the start once the upgrade is complete. Replication for all other tables should resume without interruption once the upgrade is complete. We recommend testing all current migration tasks against the latest available version of an AWS DMS replication instance before upgrading the instances from version 3.4.7.\n\nYou can review a list of all DMS versions to-date in our AWS DMS release notes [3]. We recommend that you upgrade your replication instances to version 3.5.1.\n\nIf you have any questions or concerns, please contact the AWS Support team [1].\n\n[1] https://aws.amazon.com/support\n[2] https://docs.aws.amazon.com/dms/latest/userguide/CHAP_ReplicationInstance.EngineVersions.html\n[3] https://docs.aws.amazon.com/dms/latest/userguide/CHAP_ReleaseNotes.html"}, "endTime": 1723115399, "eventTypeCategory": "scheduledChange", "eventTypeCode": "AWS_DMS_PLANNED_LIFECYCLE_EVENT", "lastUpdatedTime": "2024-07-15 03:33:16.250000+02:00", "region": "us-east-1", "service": "DMS", "startTime": "1730358000", "statusCode": "upcoming"}, {"AccountName": "NVSGISRCC.TST", "AffectedResources": ["arn:aws:kafka:eu-west-1:900804374729:cluster/testcluster1/fc304ded-41cf-44e8-97b7-d478b91b0d9f-4"], "ClarityID": "043745", "arn": "arn:aws:health:eu-west-1::event/KAFKA/AWS_KAFKA_SECURITY_PATCHING_EVENT/AWS_KAFKA_SECURITY_PATCHING_EVENT_17c5926b-bc5d-4510-93e5-e54d6ed8694f", "awsAccountId": "900804374729", "description": {"latestDescription": "MSK will patch the underlying operating system of brokers in your MSK cluster(s) with the latest OS updates between Sun, 21 Jul 2024 15:00:00 GMT and Sun, 21 Jul 2024 19:00:00 GMT. MSK patches brokers to address security vulnerabilities and to update software supporting the brokers. MSK uses an automated rolling update to patch one broker at a time, following Kafka best practices. To ensure client I/O continuity during the rolling update that is performed as part of the patching process, we recommend you review the configuration of your clients and your Apache Kafka topics as follows:\n\n   1. Ensuring the topic replication factor (RF) is at least 2 for two-AZ clusters and at least 3 for three-AZ clusters. An RF of 1 can lead to offline partitions during patching.\n   2. Set minimum in-sync replicas (minISR) to at most RF - 1 to ensure the partition replica set can tolerate one replica being offline or under-replicated\n   3. Ensure clients are configured to use multiple broker connection strings. Having multiple brokers in a client\u2019s connection string allows for failover if a specific broker supporting client I/O begins to be patched. For information about how to get a connection string with multiple brokers, see Getting the Bootstrap Brokers for an Amazon MSK Cluster [1].\n\nYour Amazon MSK clusters can be viewed in your AWS Health Dashboard in the 'Affected resources' tab.\n\nIf you have questions or concerns, please contact AWS Support [2].\n\n[1] https://docs.aws.amazon.com/msk/latest/developerguide/msk-get-bootstrap-brokers.html\n[2] https://aws.amazon.com/support"}, "endTime": "1721588400", "eventTypeCategory": "scheduledChange", "eventTypeCode": "AWS_KAFKA_SECURITY_PATCHING_EVENT", "lastUpdatedTime": "2024-07-14 17:02:22.273000+02:00", "region": "eu-west-1", "service": "KAFKA", "startTime": "1721574000", "statusCode": "upcoming"}, {"AccountName": "NOVARTIS-RDRAR01.DEV", "AffectedResources": ["arn:aws:rds:us-east-1:079269666815:db:bottest", "arn:aws:rds:us-east-1:079269666815:db:docdb-2023-03-10-09-30-503", "arn:aws:rds:us-east-1:079269666815:db:rds-prv-link", "arn:aws:rds:us-east-1:079269666815:db:docdb-2023-03-10-09-30-502", "arn:aws:rds:us-east-1:079269666815:db:docdb-2023-03-10-09-30-50"], "ClarityID": "043745", "arn": "arn:aws:health:us-east-1::event/RDS/AWS_RDS_PLANNED_LIFECYCLE_EVENT/AWS_RDS_PLANNED_LIFECYCLE_EVENT_de1433ac73d03ef39d7fb1a847f4ae25ab9b3b015619eb530febf30c58bd4874", "awsAccountId": "079269666815", "description": {"latestDescription": "[AWS Health may periodically trigger reminder notifications about this communication if resources remain unresolved.]\n\nYou are receiving this message because your AWS Account has one or more Amazon RDS, or Amazon Aurora database instances in the US-EAST-1 Region using a SSL/TLS Certificate that is expiring on August 22, 2024.\n\nA list of your affected resources can be found in the 'Affected resources' tab.\n\nThis is a follow-up notification for SSL/TLS CA certification expiration. If you believe you have already finished this work and still received this email, it is likely because you created new instances using the 2019 Certificate Authority (CA). After January 25, 2024 all newly created instances that do not explicitly specify a different CA will use the \u2018rds-ca-rsa2048-g1\u2019 CA. For information on setting an account level CA override, see the modify-certificates API documentation [1].\n\nIf your applications connect to these instances using the SSL/TLS protocol, you will need to take action before August 22, 2024 to prevent connectivity failures to your existing database instances. Even if you do not currently use SSL for your connections, you could still be affected if your databases server certificate expires, so we still recommend updating your CA.\n\nTo protect your communications with your database instances, a CA generates time-bound certificates that are checked by your database client software to authenticate any database instance before exchanging information. Following industry best practices, AWS renews the CA and creates new certificates on a routine basis to ensure customer connections are properly protected for years to come. The current CA in the US-EAST-1 Region will expire on August 22, 2024. Before this date you will need to update your DB server certificate. The following is the general process to do this:\n\nFirst, update your application clients with the new certificate, if your application client is using a trust store then add the new CA certificates into the trust stores of your client applications. RDS provides download links to the CA certificates in our User Guide [2]. For more detailed instructions on updating the trust stores on your client application see our documentation [3].\n\nSecond, update the certificate on all your affected database instances to one of the newly issued CAs. \u2018rds-ca-rsa2048-g1\u2019 is the default recommended CA because there is no algorithm change. The other CAs use new key algorithms so it could require more testing of your client setup to ensure compatibility. For more information on the new CAs see our documentation [4].\n\nThird, if you want to use a different CA than the default \u2018rds-ca-rsa2048-g1\u2019, you will need to set an account level CA override so your new instances will use the CA of your choice. To do this a modify-certificates API is available that will allow you to override the default CA on newly created database instances to either the old or one of the new CAs. This override will only apply while the CA you are overriding to is valid. To use this API you will need to be running the AWS CLI version 1.17 or later. For more information see the modify-certificates API documentation [1]. There is also a describe-certificates API [5], that will indicate your current default CA override if you have one set. To set a specific CA during instance creation use the ca-certificate-identifier option on the create-db-instance API to create a DB instance with a specific CA. For more information, see the create-db-instance API documentation [6].\n\nFor more detailed instructions on how to perform these updates, please see the Amazon RDS instances [7] and Amazon Aurora instances [8] documentation.\n\nPlease be aware of the following timeline:\n\n1. As soon as possible - You should update your client trust store, then you can update your instances server certificate to one generated by one of the new CAs.\n\n2. After January 26, 2024 - any new database instances default to using the \u2018rds-ca-rsa2048-g1\u2019 certificate. If you wish for new instances to use a different certificate, you can specify which certificate to use with the AWS console or the AWS CLI. For more information, see the create-db-instance API documentation [6].\n\n3. After August 22, 2024 - \u2018rds-ca-2019\u2019 will expire. You will need to take action before August 22, 2024, to prevent connectivity failures to your existing database instances.\n\nFor more information see our blog [9], and if you have questions or concerns, please contact AWS Support [10].\n\n[1] https://docs.aws.amazon.com/cli/latest/reference/rds/modify-certificates.html\n[2] https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/UsingWithRDS.SSL.html#UsingWithRDS.SSL.CertificatesAllRegions\n[3] https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/UsingWithRDS.SSL-certificate-rotation.html#UsingWithRDS.SSL-certificate-rotation-updating\n[4] https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/UsingWithRDS.SSL.html#UsingWithRDS.SSL.RegionCertificateAuthorities\n[5] https://docs.aws.amazon.com/cli/latest/reference/rds/describe-certificates.html\n[6] https://docs.aws.amazon.com/cli/latest/reference/rds/create-db-instance.html\n[7] https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/UsingWithRDS.SSL-certificate-rotation.html\n[8] https://docs.aws.amazon.com/AmazonRDS/latest/AuroraUserGuide/UsingWithRDS.SSL-certificate-rotation.html\n[9] https://aws.amazon.com/blogs/aws/rotate-your-ssl-tls-certificates-now-amazon-rds-and-amazon-aurora-expire-in-2024/\n[10] https://console.aws.amazon.com/support/home"}, "endTime": null, "eventTypeCategory": "scheduledChange", "eventTypeCode": "AWS_RDS_PLANNED_LIFECYCLE_EVENT", "lastUpdatedTime": "2024-07-03 11:07:05.126000+02:00", "region": "us-east-1", "service": "RDS", "startTime": "1724310000", "statusCode": "upcoming"}, {"AccountName": "NVSGISRCC.GB", "AffectedResources": "arn:aws:rds:us-east-1:304512965277:db:commsrvprd01", "ClarityID": "043745", "arn": "arn:aws:health:us-east-1::event/RDS/AWS_RDS_PLANNED_LIFECYCLE_EVENT/AWS_RDS_PLANNED_LIFECYCLE_EVENT_de1433ac73d03ef39d7fb1a847f4ae25ab9b3b015619eb530febf30c58bd4874", "awsAccountId": "304512965277", "description": {"latestDescription": "[AWS Health may periodically trigger reminder notifications about this communication if resources remain unresolved.]\n\nYou are receiving this message because your AWS Account has one or more Amazon RDS, or Amazon Aurora database instances in the US-EAST-1 Region using a SSL/TLS Certificate that is expiring on August 22, 2024.\n\nA list of your affected resources can be found in the 'Affected resources' tab.\n\nThis is a follow-up notification for SSL/TLS CA certification expiration. If you believe you have already finished this work and still received this email, it is likely because you created new instances using the 2019 Certificate Authority (CA). After January 25, 2024 all newly created instances that do not explicitly specify a different CA will use the \u2018rds-ca-rsa2048-g1\u2019 CA. For information on setting an account level CA override, see the modify-certificates API documentation [1].\n\nIf your applications connect to these instances using the SSL/TLS protocol, you will need to take action before August 22, 2024 to prevent connectivity failures to your existing database instances. Even if you do not currently use SSL for your connections, you could still be affected if your databases server certificate expires, so we still recommend updating your CA.\n\nTo protect your communications with your database instances, a CA generates time-bound certificates that are checked by your database client software to authenticate any database instance before exchanging information. Following industry best practices, AWS renews the CA and creates new certificates on a routine basis to ensure customer connections are properly protected for years to come. The current CA in the US-EAST-1 Region will expire on August 22, 2024. Before this date you will need to update your DB server certificate. The following is the general process to do this:\n\nFirst, update your application clients with the new certificate, if your application client is using a trust store then add the new CA certificates into the trust stores of your client applications. RDS provides download links to the CA certificates in our User Guide [2]. For more detailed instructions on updating the trust stores on your client application see our documentation [3].\n\nSecond, update the certificate on all your affected database instances to one of the newly issued CAs. \u2018rds-ca-rsa2048-g1\u2019 is the default recommended CA because there is no algorithm change. The other CAs use new key algorithms so it could require more testing of your client setup to ensure compatibility. For more information on the new CAs see our documentation [4].\n\nThird, if you want to use a different CA than the default \u2018rds-ca-rsa2048-g1\u2019, you will need to set an account level CA override so your new instances will use the CA of your choice. To do this a modify-certificates API is available that will allow you to override the default CA on newly created database instances to either the old or one of the new CAs. This override will only apply while the CA you are overriding to is valid. To use this API you will need to be running the AWS CLI version 1.17 or later. For more information see the modify-certificates API documentation [1]. There is also a describe-certificates API [5], that will indicate your current default CA override if you have one set. To set a specific CA during instance creation use the ca-certificate-identifier option on the create-db-instance API to create a DB instance with a specific CA. For more information, see the create-db-instance API documentation [6].\n\nFor more detailed instructions on how to perform these updates, please see the Amazon RDS instances [7] and Amazon Aurora instances [8] documentation.\n\nPlease be aware of the following timeline:\n\n1. As soon as possible - You should update your client trust store, then you can update your instances server certificate to one generated by one of the new CAs.\n\n2. After January 26, 2024 - any new database instances default to using the \u2018rds-ca-rsa2048-g1\u2019 certificate. If you wish for new instances to use a different certificate, you can specify which certificate to use with the AWS console or the AWS CLI. For more information, see the create-db-instance API documentation [6].\n\n3. After August 22, 2024 - \u2018rds-ca-2019\u2019 will expire. You will need to take action before August 22, 2024, to prevent connectivity failures to your existing database instances.\n\nFor more information see our blog [9], and if you have questions or concerns, please contact AWS Support [10].\n\n[1] https://docs.aws.amazon.com/cli/latest/reference/rds/modify-certificates.html\n[2] https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/UsingWithRDS.SSL.html#UsingWithRDS.SSL.CertificatesAllRegions\n[3] https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/UsingWithRDS.SSL-certificate-rotation.html#UsingWithRDS.SSL-certificate-rotation-updating\n[4] https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/UsingWithRDS.SSL.html#UsingWithRDS.SSL.RegionCertificateAuthorities\n[5] https://docs.aws.amazon.com/cli/latest/reference/rds/describe-certificates.html\n[6] https://docs.aws.amazon.com/cli/latest/reference/rds/create-db-instance.html\n[7] https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/UsingWithRDS.SSL-certificate-rotation.html\n[8] https://docs.aws.amazon.com/AmazonRDS/latest/AuroraUserGuide/UsingWithRDS.SSL-certificate-rotation.html\n[9] https://aws.amazon.com/blogs/aws/rotate-your-ssl-tls-certificates-now-amazon-rds-and-amazon-aurora-expire-in-2024/\n[10] https://console.aws.amazon.com/support/home"}, "endTime": null, "eventTypeCategory": "scheduledChange", "eventTypeCode": "AWS_RDS_PLANNED_LIFECYCLE_EVENT", "lastUpdatedTime": "2024-07-03 11:07:05.126000+02:00", "region": "us-east-1", "service": "RDS", "startTime": "1724310000", "statusCode": "upcoming"}, {"AccountName": "NOVARTIS-RDRAE01.TST", "AffectedResources": ["arn:aws:rds:us-east-1:968951650846:db:readreplica-aurorapostgresdb", "arn:aws:rds:us-east-1:968951650846:db:readreplica-postgresdb", "arn:aws:rds:us-east-1:968951650846:db:aurorapostgresdb", "arn:aws:rds:us-east-1:968951650846:db:postgresdb"], "ClarityID": "043745", "arn": "arn:aws:health:us-east-1::event/RDS/AWS_RDS_PLANNED_LIFECYCLE_EVENT/AWS_RDS_PLANNED_LIFECYCLE_EVENT_de1433ac73d03ef39d7fb1a847f4ae25ab9b3b015619eb530febf30c58bd4874", "awsAccountId": "968951650846", "description": {"latestDescription": "[AWS Health may periodically trigger reminder notifications about this communication if resources remain unresolved.]\n\nYou are receiving this message because your AWS Account has one or more Amazon RDS, or Amazon Aurora database instances in the US-EAST-1 Region using a SSL/TLS Certificate that is expiring on August 22, 2024.\n\nA list of your affected resources can be found in the 'Affected resources' tab.\n\nThis is a follow-up notification for SSL/TLS CA certification expiration. If you believe you have already finished this work and still received this email, it is likely because you created new instances using the 2019 Certificate Authority (CA). After January 25, 2024 all newly created instances that do not explicitly specify a different CA will use the \u2018rds-ca-rsa2048-g1\u2019 CA. For information on setting an account level CA override, see the modify-certificates API documentation [1].\n\nIf your applications connect to these instances using the SSL/TLS protocol, you will need to take action before August 22, 2024 to prevent connectivity failures to your existing database instances. Even if you do not currently use SSL for your connections, you could still be affected if your databases server certificate expires, so we still recommend updating your CA.\n\nTo protect your communications with your database instances, a CA generates time-bound certificates that are checked by your database client software to authenticate any database instance before exchanging information. Following industry best practices, AWS renews the CA and creates new certificates on a routine basis to ensure customer connections are properly protected for years to come. The current CA in the US-EAST-1 Region will expire on August 22, 2024. Before this date you will need to update your DB server certificate. The following is the general process to do this:\n\nFirst, update your application clients with the new certificate, if your application client is using a trust store then add the new CA certificates into the trust stores of your client applications. RDS provides download links to the CA certificates in our User Guide [2]. For more detailed instructions on updating the trust stores on your client application see our documentation [3].\n\nSecond, update the certificate on all your affected database instances to one of the newly issued CAs. \u2018rds-ca-rsa2048-g1\u2019 is the default recommended CA because there is no algorithm change. The other CAs use new key algorithms so it could require more testing of your client setup to ensure compatibility. For more information on the new CAs see our documentation [4].\n\nThird, if you want to use a different CA than the default \u2018rds-ca-rsa2048-g1\u2019, you will need to set an account level CA override so your new instances will use the CA of your choice. To do this a modify-certificates API is available that will allow you to override the default CA on newly created database instances to either the old or one of the new CAs. This override will only apply while the CA you are overriding to is valid. To use this API you will need to be running the AWS CLI version 1.17 or later. For more information see the modify-certificates API documentation [1]. There is also a describe-certificates API [5], that will indicate your current default CA override if you have one set. To set a specific CA during instance creation use the ca-certificate-identifier option on the create-db-instance API to create a DB instance with a specific CA. For more information, see the create-db-instance API documentation [6].\n\nFor more detailed instructions on how to perform these updates, please see the Amazon RDS instances [7] and Amazon Aurora instances [8] documentation.\n\nPlease be aware of the following timeline:\n\n1. As soon as possible - You should update your client trust store, then you can update your instances server certificate to one generated by one of the new CAs.\n\n2. After January 26, 2024 - any new database instances default to using the \u2018rds-ca-rsa2048-g1\u2019 certificate. If you wish for new instances to use a different certificate, you can specify which certificate to use with the AWS console or the AWS CLI. For more information, see the create-db-instance API documentation [6].\n\n3. After August 22, 2024 - \u2018rds-ca-2019\u2019 will expire. You will need to take action before August 22, 2024, to prevent connectivity failures to your existing database instances.\n\nFor more information see our blog [9], and if you have questions or concerns, please contact AWS Support [10].\n\n[1] https://docs.aws.amazon.com/cli/latest/reference/rds/modify-certificates.html\n[2] https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/UsingWithRDS.SSL.html#UsingWithRDS.SSL.CertificatesAllRegions\n[3] https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/UsingWithRDS.SSL-certificate-rotation.html#UsingWithRDS.SSL-certificate-rotation-updating\n[4] https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/UsingWithRDS.SSL.html#UsingWithRDS.SSL.RegionCertificateAuthorities\n[5] https://docs.aws.amazon.com/cli/latest/reference/rds/describe-certificates.html\n[6] https://docs.aws.amazon.com/cli/latest/reference/rds/create-db-instance.html\n[7] https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/UsingWithRDS.SSL-certificate-rotation.html\n[8] https://docs.aws.amazon.com/AmazonRDS/latest/AuroraUserGuide/UsingWithRDS.SSL-certificate-rotation.html\n[9] https://aws.amazon.com/blogs/aws/rotate-your-ssl-tls-certificates-now-amazon-rds-and-amazon-aurora-expire-in-2024/\n[10] https://console.aws.amazon.com/support/home"}, "endTime": 1723373432, "eventTypeCategory": "scheduledChange", "eventTypeCode": "AWS_RDS_PLANNED_LIFECYCLE_EVENT", "lastUpdatedTime": "2024-07-03 11:07:05.126000+02:00", "region": "us-east-1", "service": "RDS", "startTime": "1724310000", "statusCode": "upcoming"},]
    
    function reset() {
        targetArray = null
        renderTable(sortKeys(jsonData))
    }
    
    function getEpochTimeForSelectedDay(days) {
        // Get the current UTC time in milliseconds
        const currentTime = Date.now();

        // Calculate the time for the selected day in milliseconds
        const selectedTime = currentTime + days * 24 * 60 * 60 * 1000;

        // Convert to seconds (Epoch time is in seconds)
        const epochTime = Math.floor(selectedTime / 1000);

        return epochTime;
    }

    function filterDataByDays(epochTime, nextDayEpochTime) {
        return jsonData.filter(item => {
            let timeVal = parseInt(item.endTime)
            const currentEpochTime = Math.floor(Date.now() / 1000);
            // Ignore items with null, 'null', or undefined EndTime values
            if (timeVal == null || timeVal == 'null' || timeVal == undefined) {
                return false;
            } else {
                if (timeVal <= epochTime && currentEpochTime <= timeVal){
                    return item
                } else{
                    return false;
                }
            }
            
            // console.log("endTime===>", currentEpochTime)
            // return timeVal <= epochTime && currentEpochTime <= timeVal;
        });
    }

    function epochToDatetime(epochTime) {
        // Sample UTC epoch timestamp (in seconds)
        const utcEpochTimestamp = epochTime;

        // Create a new Date object with the UTC epoch timestamp
        const utcDate = new Date(utcEpochTimestamp * 1000); // Multiply by 1000 to convert seconds to milliseconds

        // Get the UTC date and time string
        const utcDateTimeString = utcDate.toUTCString();

        return utcDateTimeString

    }


    document.addEventListener('DOMContentLoaded', function () {
        const daysDropdown = document.getElementById('daysDropdown');
        const dropdownMenu = document.querySelector('#daysDropdown + .dropdown-menu');

        // Set default value to 7 days
        let selectedDays = 7;
        daysDropdown.textContent = `${selectedDays} Days`;

        // Function to update table based on selected days
        function updateTableForSelectedDays(days) {
            const modalBody = document.querySelector('.urgent-modal-body');
            const epochTime = getEpochTimeForSelectedDay(days);
            const nextDayEpochTime = getEpochTimeForSelectedDay(days + 1);
            const tabletoBuild = sortKeys(filterDataByDays(epochTime, nextDayEpochTime));
            
            if (tabletoBuild.length > 0) {
                const headers = [
                    "AccountName",
                    "awsAccountId",
                    "AffectedResources",
                    "endTime",
                    "service",
                    "statusCode",
                    "eventTypeCode"
                ];

                let tableHTML = '<div class="table-wrapper"><table class="table table-bordered table-striped fixed-header">';
                tableHTML += '<thead><tr>';

                headers.forEach(header => {
                    tableHTML += `<th class="table-info custom-th">${header}</th>`;
                });

                tableHTML += '</tr></thead>';
                tableHTML += '<tbody>';

                tabletoBuild.forEach(item => {
                    tableHTML += '<tr>';
                    headers.forEach(header => {
                        if (header === "endTime") {
                            tableHTML += `<td>${epochToDatetime(item[header])}</td>`;
                        } else {
                            tableHTML += `<td>${item[header]}</td>`;
                        }
                    });
                    tableHTML += '</tr>';
                });

                tableHTML += '</tbody></table></div>';
                modalBody.innerHTML = tableHTML;
            } else {
                modalBody.innerHTML = '<p style="padding-top: 5em;">No data available for the selected criteria.</p>';
            }
        }

        // Initial table update for 7 days
        updateTableForSelectedDays(selectedDays);

        dropdownMenu.addEventListener('click', function (e) {
            selectedDays = e.target.dataset.days;
            if (selectedDays) {
                selectedDays = parseInt(selectedDays, 10);
                daysDropdown.textContent = `${selectedDays} Day${selectedDays > 1 ? 's' : ''}`;
                updateTableForSelectedDays(selectedDays);
            }
        });
    });


    function handleCardClick() {
        // Show the modal when clicked
        var modal = new bootstrap.Modal(document.getElementById('urgentModal'));
        modal.show();
    }

    function countValuesForKey(key) {
        const counts = {};

        jsonData.forEach(item => {
            let keyValue;

            if (typeof item[key] === 'object') {
                keyValue = JSON.stringify(item[key]);
            } else {
                keyValue = item[key];
            }

            counts[keyValue] = (counts[keyValue] || 0) + 1;
        });

        return counts;
    }

    function combinationKeyGroupByValue(inputData){
        // Initialize an object to store the results
        const result = {
            "AccountName(awsAccountId)": {}
        };

        // Iterate through each entry in the input data
        inputData.forEach(entry => {
            // Create the combined key
            const combinedKey = `${entry.AccountName}(${entry.awsAccountId})`;
            
            // Count the occurrences of each combined key
            if (result["AccountName(awsAccountId)"][combinedKey]) {
                result["AccountName(awsAccountId)"][combinedKey] += 1;
            } else {
                result["AccountName(awsAccountId)"][combinedKey] = 1;
            }
        });

        return result;
    }
    function groupByKey() {
        Object.keys(jsonData[0]).forEach(key => {
            const counts = countValuesForKey(key);

            countsObj[key] = counts;
        });
        return countsObj
    }

    function getValuesByKey(data, key) {
        // Create a Set to store unique values
        let uniqueValues = new Set();

        // Iterate through the data array
        data.forEach(item => {
            // Check if the current object has the specified key
            if (item.hasOwnProperty(key)) {
                // Add the value corresponding to the key to the Set
                uniqueValues.add(item[key]);
            }
        });

        // Convert the Set to an array and return
        return Array.from(uniqueValues);
    }

    function truncateString(str, num) {
        if (str.length <= num) {
            return str;
        }
        return str.slice(0, num) + '...';
    }

    function sortKeys(data) {
        // Sort function for keys
        function sortObjectKeys(obj) {
            return Object.keys(obj).sort().reduce((acc, key) => {
                acc[key] = obj[key];
                return acc;
            }, {});
        }

        // If the data is an array
        if (Array.isArray(data)) {
            return data.map(item => sortObjectKeys(item));
        }
        // If the data is an object
        else if (typeof data === 'object') {
            return sortObjectKeys(data);
        }
        // Return unchanged data if it's neither an array nor an object
        else {
            return data;
        }
    }

    const sortedData = sortKeys(jsonData);

    function filterItemsByKeyValue(targetArray, key, value) {
        return targetArray.filter(item => item[key] == value);
    }

    // Example function to handle dropdown selection
    function handleDropdownSelection(key, value) {
        // reset()
        if (targetArray == null) {
            targetArray = [...jsonData];
        }

        console.log("Selected value:", key, value, targetArray.length);
        if (value == "null") {
            value = null
        }
        const filteredItems = filterItemsByKeyValue(targetArray, key, value);
        targetArray = [...filteredItems];
        // console.log("Filter Length",filteredItems.length)

        renderTable(sortKeys(filteredItems))


    }

    function renderTable(tableData) {
        const tableContainer = document.getElementById('table-container');
        tableContainer.innerHTML = '';

        try {
            const data = tableData;
            // console.log(data)
            const keys = Object.keys(data[0]);

            // Create table element
            const table = document.createElement('table');
            table.className = 'table table-bordered table-striped fixed-header';

            // Create table header
            const thead = document.createElement('thead');
            const headerRow = document.createElement('tr');
            keys.forEach(key => {
                const th = document.createElement('th');

                th.className = "table-info custom-th"
                if (key == 'Description' || key == 'event') {
                    th.textContent = key;
                } else {
                    // Create dropdown button and menu
                    const dropdownDiv = document.createElement('div');
                    dropdownDiv.className = "btn-group";

                    const dynamicValues = getValuesByKey(data, key); // Example dynamic array of values
                    
                    // Create an empty string to store the HTML for the <ul> items
                    let dropdownItemsHTML = '';

                    // Iterate over the dynamicValues array to build the <li> items
                    dynamicValues.forEach(value => {
                        dropdownItemsHTML += `<li><a class="dropdown-item" href="#" onclick="handleDropdownSelection('${key}','${value}')">${value}</a></li>`;
                    });
                    dropdownDiv.innerHTML = `<button class="btn btn-warning btn-sm dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-expanded="false">${key}</button>
                    <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton" style="max-height: 200px; overflow-y: auto;">
                        ${dropdownItemsHTML}
                    </ul>`;
                  
                    
                    th.appendChild(dropdownDiv);

                }


                // Add sorting icons
                //<i class="bi bi-arrow-down-up"><\/i>
                // const icon = document.createElement('i');
                // icon.className = 'bi bi-arrow-down-up mx-4';

                // th.appendChild(icon);
                headerRow.appendChild(th);
                // icon.addEventListener('click', () => {
                //     sortTable(key);
                // });
            });
            thead.appendChild(headerRow);
            table.appendChild(thead);

            // Create table body
            const tbody = document.createElement('tbody');
            data.forEach(item => {
                const row = document.createElement('tr');
                keys.forEach(key => {
                    const td = document.createElement('td');
                    const content = typeof item[key] === 'string' ? item[key] : JSON.stringify(item[key]);
                    td.textContent = content;
                    td.setAttribute('data-original-content', content);
                    if (content && content.length > 50) {
                        // Check if content is not undefined and its length is greater than 50
                        td.textContent = truncateString(content, 75);
                    } else if (content) {
                        // If content is defined but its length is not greater than 50, directly assign it
                        td.textContent = content;
                    } else {
                        // Handle case where content is undefined
                        td.textContent = "N/A"; // Or any default text you want to display
                    }

                    td.addEventListener('click', () => {
                        const originalContent = td.getAttribute('data-original-content'); // Retrieve original content

                        handleClick(originalContent, key); // Call the handleClick function on click
                    });
                    row.appendChild(td);
                });
                tbody.appendChild(row);
            });
            table.appendChild(tbody);

            // Append table to container
            tableContainer.appendChild(table);
        } catch (error) {
            console.log(error)
            tableContainer.textContent = 'No Record Found!!';
        }
    }

    function createCard() {
        const summaryContainer = document.getElementById('summary-container');
        summaryContainer.innerHTML = '';

        // Call groupByKey to get countsObj
        const countsObj = groupByKey();

        // Create container div
        const container = document.createElement('div');
        container.className = 'container';

        // Create row element
        const row = document.createElement('div');
        row.className = 'row ';

        let result = {...countsObj, ...combinationKeyGroupByValue(jsonData)}
        console.log(result)
        // Loop through countsObj and create cards
        for (const key in result) {
            if (key == 'region' || key == 'AccountName(awsAccountId)' || key == 'service') {
                if (result.hasOwnProperty(key)) {

                    const count = result[key];

                    // Create column element for each card
                    const column = document.createElement('div');
                    column.className = 'col-md-12 mt-2';

                    // Create card element
                    const card = document.createElement('div');
                    card.className = 'card';

                    // Create card body element
                    const cardBody = document.createElement('div');
                    cardBody.className = 'card-body';

                    // Create card title element
                    const cardTitle = document.createElement('h5');
                    cardTitle.className = 'card-title';
                    cardTitle.textContent = "Group by Data for " + key + " :"; // Use key as card title

                    // Create table element
                    const table = document.createElement('table');
                    table.className = 'table table-hover table-bordered table-striped fixed-header';

                    // Create table head
                    const thead = document.createElement('thead');
                    const headRow = document.createElement('tr');

                    const th1 = document.createElement('th');
                    th1.textContent = key;
                    th1.style.backgroundColor = "#FFCC00"
                    const th2 = document.createElement('th');
                    th2.textContent = 'Number of Events';
                    th2.style.backgroundColor = "#FFCC00"
                    headRow.appendChild(th1);
                    headRow.appendChild(th2);
                    thead.appendChild(headRow);

                    // Create table body
                    const tbody = document.createElement('tbody');

                    for (const value in count) {
                        if (count.hasOwnProperty(value)) {
                            const valueRow = document.createElement('tr');
                            const td1 = document.createElement('td');
                            if (value.length > 30) {
                                // td.classList.add('wrap-text');
                                td1.textContent = truncateString(value, 30)
                            } else {
                                td1.textContent = value;
                            }

                            td1.setAttribute('data-original-content', value);

                            td1.addEventListener('click', () => {
                                const originalContent = td1.getAttribute('data-original-content'); // Retrieve original content

                                handleClick(originalContent, key); // Call the handleClick function on click
                            });

                            const td2 = document.createElement('td');
                            td2.textContent = count[value];
                            valueRow.appendChild(td1);
                            valueRow.appendChild(td2);
                            tbody.appendChild(valueRow);
                        }
                    }

                    // Append table head and body to table
                    table.appendChild(thead);
                    table.appendChild(tbody);

                    // Append card title and table to card body
                    cardBody.appendChild(cardTitle);
                    cardBody.appendChild(table);

                    // Append card body to card
                    card.appendChild(cardBody);

                    // Append card to column
                    column.appendChild(card);

                    // Append column to row
                    row.appendChild(column);
                }
            }
        }

        // Append row to container
        container.appendChild(row);

        summaryContainer.appendChild(container);
        // Append container to document body or any other parent element
        //    document.body.appendChild(container);
    }

    // Initial render
    window.onload = function () {
        // renderTable(sortedData);

        // console.log("data ===>", countsObj)
        // createCard();
    };

    // Search functionality
    // Recursive function to search for a term in the data object
    function searchInData(data, term) {
        return Object.values(data).some(value => {
            if (typeof value === 'object' && value !== null) {
                // If value is an object or array, recursively search inside it
                return searchInData(value, term);
            } else if (typeof value === 'string' && value.toLowerCase().includes(term)) {
                // If value is a string and contains the search term, return true
                return true;
            }
            return false;
        });
    }

    // Update search input event listener
    searchInput.addEventListener('input', () => {
        const searchTerm = searchInput.value.trim().toLowerCase(); // Trim whitespace and convert to lowercase
        const filteredData = jsonData.filter(item => {
            // Check if any value in the item contains the search term
            return searchInData(item, searchTerm);
        });
        renderTable(sortKeys(filteredData));
    });

    //Identify Array
    function identifyArrayType(arr) {
        if (typeof arr === 'object' && arr !== null && !Array.isArray(arr)) {
            return "objects"
        }
        // Check if string
        if (typeof arr === 'string' && arr !== null && !Array.isArray(arr)) {
            return "string";
        }

        // Check if numbers
        if (typeof arr === 'number' && arr !== null && !Array.isArray(arr)) {
            return "numbers";
        }

        // Check if array is empty
        if (arr.length === 0) {
            return "Empty array";
        }

        // Check if array of arrays
        if (arr.every(innerArr => Array.isArray(innerArr))) {
            return "Array of arrays";
        }

        // Check if array of objects
        if (arr.every(item => typeof item === 'object' && item !== null && !Array.isArray(item))) {
            return "Array of objects";
        }

        // Check if array of strings
        if (arr.every(item => typeof item === 'string')) {
            return "Array of strings";
        }

        // Check if array of numbers
        if (arr.every(item => typeof item === 'number')) {
            return "Array of numbers";
        }

        // Check if array of booleans
        if (arr.every(item => typeof item === 'boolean')) {
            return "Array of booleans";
        }

        // If none of the above, return "Mixed array"
        return "Mixed array";
    }

    // Function to handle text wrapping behavior
    function handleClick(originalContent, columnKey) {
        const modalTitle = document.getElementById('exampleModalLabel');
        modalTitle.textContent = columnKey + " : "; // Set modal title to column key

        const modalContent = document.getElementById('nestedTableContainer');


        const content = originalContent

        let parsedContent;
        try {
            // Try parsing content as JSON
            parsedContent = JSON.parse(content);
        } catch (error) {
            // If parsing fails, assume content is a string
            parsedContent = content;
        }
        let value = identifyArrayType(parsedContent)

        if (value === "Array of objects" || value === "objects") {
            renderNestedTable(parsedContent, modalContent, value);
        }
        else {
            modalContent.textContent = originalContent; // Set modal content to clicked cell content
        }

        const modal = new bootstrap.Modal(document.getElementById('exampleModal')); // Create modal instance
        modal.show(); // Show the modal
    }

    function renderNestedTable(data, modalContent, type) {
        const nestedData = type === "objects" ? [data] : data;
        modalContent.innerHTML = '';

        try {
            const nestedKeys = Object.keys(nestedData[0]);

            // Create table element
            const nestedTable = document.createElement('table');
            nestedTable.className = 'table table-bordered table-striped align-middle';

            // Create table header
            const nestedThead = document.createElement('thead');
            const nestedHeaderRow = document.createElement('tr');

            nestedKeys.forEach(key => {
                const nestedTh = document.createElement('th');
                nestedTh.textContent = key;
                nestedTh.className = "table-primary";

                nestedHeaderRow.appendChild(nestedTh);
            });
            nestedThead.appendChild(nestedHeaderRow);
            nestedTable.appendChild(nestedThead);

            // Create table body
            const nestedTbody = document.createElement('tbody');

            nestedData.forEach(item => {
                const nestedRow = document.createElement('tr');

                nestedKeys.forEach(key => {
                    const nestedTd = document.createElement('td');

                    let nestedContent = item[key];
                    // Check if content is object or array
                    if (typeof nestedContent === 'object') {
                        nestedContent = JSON.stringify(nestedContent);
                        // Add an onclick event to show modal
                        nestedTd.classList.add('nested-data');
                        nestedTd.addEventListener('click', () => {
                            handleClick(nestedTd, key);
                        });
                    }

                    nestedTd.textContent = nestedContent;
                    nestedRow.appendChild(nestedTd);
                });
                nestedTbody.appendChild(nestedRow);
            });
            nestedTable.appendChild(nestedTbody);

            // Append table to container
            modalContent.appendChild(nestedTable);
        } catch (error) {
            modalContent.textContent = 'No Record Found!!';
        }
    }



</script>


